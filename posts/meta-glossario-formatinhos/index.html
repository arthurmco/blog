<!doctype html><html lang=en><head><title>Formatinhos: Prelúdio :: Blog do Arthur M.</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Amanhã é o lançamento da minha série dos formatinhos, com o primeiro episódio sendo o dos arquivos .bmp
Os posts da série terão descrições padronizadas de algumas estruturas de dados. Alguns de vocês podem estar familiarizados com esse tipo de descrição, mas, como eu tento escrever para os júniores e as sandys, eu vou explicar.
Se você começar a ler esse post e se pegar pensando &amp;ldquo;Eu já sei isso&amp;rdquo;, então você já pode começar a ver a série dos formatinhos.
"><meta name=keywords content="formatinhos,estrutura"><meta name=robots content="noodp"><link rel=canonical href=https://arthurmco.github.io/blog/posts/meta-glossario-formatinhos/><link rel=stylesheet href=https://arthurmco.github.io/blog/assets/style.css><link rel=stylesheet href=https://arthurmco.github.io/blog/assets/red.css><link rel=apple-touch-icon href=https://arthurmco.github.io/blog/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://arthurmco.github.io/blog/img/favicon/red.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Formatinhos: Prelúdio"><meta property="og:description" content="Amanhã é o lançamento da minha série dos formatinhos, com o primeiro episódio sendo o dos arquivos .bmp
Os posts da série terão descrições padronizadas de algumas estruturas de dados. Alguns de vocês podem estar familiarizados com esse tipo de descrição, mas, como eu tento escrever para os júniores e as sandys, eu vou explicar.
Se você começar a ler esse post e se pegar pensando &amp;ldquo;Eu já sei isso&amp;rdquo;, então você já pode começar a ver a série dos formatinhos.
"><meta property="og:url" content="https://arthurmco.github.io/blog/posts/meta-glossario-formatinhos/"><meta property="og:site_name" content="Blog do Arthur M."><meta property="og:image" content="https://arthurmco.github.io/blog/img/favicon/red.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2022-08-11 14:25:28 -0300 -0300"></head><body class=red><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=https://arthurmco.github.io/blog/><div class=logo>Blog do Arthur M.</div></a></div></div></header><div class=content><div class=post><h1 class=post-title><a href=https://arthurmco.github.io/blog/posts/meta-glossario-formatinhos/>Formatinhos: Prelúdio</a></h1><div class=post-meta><span class=post-date>2022-08-11
[Modificado em: 2022-08-11]</span>
<span class=post-author>:: Arthur Mendes</span>
<span class=post-reading-time><br>4
minutos
estimados de leitura</span></div><span class=post-tags>#<a href=https://arthurmco.github.io/blog/tags/meta/>meta</a>&nbsp;
#<a href=https://arthurmco.github.io/blog/tags/code/>code</a>&nbsp;</span><div class=post-content><div><p>Amanhã é o lançamento da minha série dos formatinhos, com o primeiro episódio sendo o dos
arquivos <strong>.bmp</strong></p><p>Os posts da série terão descrições padronizadas de algumas estruturas de dados. Alguns de vocês
podem estar familiarizados com esse tipo de descrição, mas, como eu tento escrever para os
júniores e as sandys, eu vou explicar.</p><p>Se você começar a ler esse post e se pegar pensando &ldquo;Eu já sei isso&rdquo;, então você já pode começar
a ver a série dos formatinhos.</p><hr><blockquote><p>Antes de mais nada, leia isso:</p><ul><li><a href=https://pt.wikipedia.org/wiki/Sistema_de_numera%C3%A7%C3%A3o_hexadecimal>Numeração hexadecimal</a></li><li><a href=https://pt.wikipedia.org/wiki/Extremidade_(ordena%C3%A7%C3%A3o)>Extremidade (ou <em>endianness</em>)</a></li></ul><p>Vai ser importante lá na frente!</p></blockquote><p>O código será mostrado assim (aprendi a formatar o código desse jeito nessa semana, e fica bem
mais bonito, dá pra expandir e fica melhor em mobile.)</p><div class=collapsable-code><input id=267419835 type=checkbox>
<label for=267419835><span class=collapsable-code__language>c++</span>
<span class=collapsable-code__title>Código exemplo</span>
<span class=collapsable-code__toggle data-label-expand=△ data-label-collapse=▽></span></label><pre class=language-c++><code>
#include &lt;cstdint&gt;
#include &lt;string&gt;

struct Teste {
    int8_t val1;
    int8_t val2;
    std::string str;
}

int testa_o_teste(const Teste&amp; teste, int valor) {
    // aaaaaaa
}

</code></pre></div><p>Eu vou tentar ser o mais didático possível no código. Se algo não ficar claro, você pode comentar.</p><p>Em algumas partes do post, eu vou precisar mostrar dumps hexadecimais e estruturas de dados,
geralmente juntos.</p><p>Um dump hexadecimal é algo parecido com isso:<br>(Ele quebra em mobile :(. Até eu resolver isso, veja esse dump com o celular na horizontal)</p><pre tabindex=0><code>00000000  45 58 45 4d 00 04 00 00  00 04 00 00 20 03 8f 3d  |EXEM........ ..=|
00000010  18 00 00 00 20 03 00 00  41 69 20 71 75 65 20 73  |.... ...Ai que s|
00000020  61 63 6f 00                                       |aco.|
00000024
</code></pre><p>O dump acima está em um formato padrão (de um programa chamado <code>hexdump</code>). Todos os valores
das três primeiras colunas estão em hexadecimal.</p><p>A primeira coluna mostra um valor que representa a posição do byte logo depois dela,
em hexadecimal. (<code>00000010</code> = 16 em decimal, <code>00000020</code> = 32 em decimal, <code>00000024</code> = 36).</p><p>A segunda coluna mostra os bytes 0 até 7 da linha. Ou seja:</p><pre tabindex=0><code>00000000  45 58 45 4d 00 04 00 00 
</code></pre><p>O primeiro byte é <code>45</code>, o segundo é <code>58</code>, o terceiro é <code>45</code> denovo&mldr;</p><pre tabindex=0><code>00000010  18 00 00 00 20 03 00 00
</code></pre><p>O décimo sexto byte é <code>18</code>, do 17 ao 19 são <code>00</code>, o vigésimo byte, por coincidéncia, é <code>20</code>&mldr;</p><p>E por aí vai</p><p>A terceira coluna mostra os bytes 8 até 15. Mesmo esquema.</p><p>A quarta coluna é a representação, em ASCII, dos bytes daquela linha:</p><pre tabindex=0><code>00000000  45 58 45 4d 00 04 00 00  00 04 00 00 20 03 8f 3d  |EXEM........ ..=|
</code></pre><p>&lsquo;E&rsquo; = <code>45</code>, &lsquo;X&rsquo; = <code>58</code>, &lsquo;M&rsquo; = <code>4d</code>&mldr; você entendeu. Os valores que não têm um caractere
correspondente printável são representados com um ponto.</p><p>Geralmente, o dump vai vir acompanhado de uma tabela mostrando o que tem dentro do arquivo.<br>Cada linha da tabela é um <strong>campo</strong>, um valor que significa alguma coisa.<br>Por exemplo:</p><table><thead><tr><th>Posição</th><th>Tamanho</th><th>Campo</th><th>Valor</th></tr></thead><tbody><tr><td><code>0x0 (0)</code></td><td>4</td><td>MAGIC</td><td><code>45 58 45 4d</code></td></tr><tr><td><code>0x4 (4)</code></td><td>4</td><td>width</td><td><code>0x400</code> = 1024</td></tr><tr><td><code>0x8 (8)</code></td><td>4</td><td>height</td><td><code>0x400</code> = 1024</td></tr><tr><td><code>0xC (12)</code></td><td>1</td><td>bit depth</td><td><code>0x20</code> = 32</td></tr><tr><td><code>0xD (13)</code></td><td>1</td><td>compression</td><td><code>0x3</code> = RLE8</td></tr><tr><td><code>0xE (14)</code></td><td>2</td><td>checksum</td><td><code>8f 3d</code></td></tr><tr><td><code>0x10 (16)</code></td><td>4</td><td>name offset</td><td><code>0x18</code></td></tr><tr><td><code>0x14 (20)</code></td><td>4</td><td>data offset</td><td><code>0x320</code></td></tr></tbody></table><p>Na coluna <strong>Posição</strong> eu mostro em qual posição (tanto em decimal quanto em hexadecimal) o campo
fica dentro do arquivo. A posição sempre vai ser em bytes.</p><p>O <strong>Tamanho</strong> é o tamanho, em bytes, daquele campo.</p><p>O <strong>campo</strong> é o nome do campo, como ele está na documentação. Se a documentação for informal, vai
ser um nome que eu vou inventar e que descreve o campo.</p><p>O <strong>valor</strong> é o valor atual do campo, pra você não precisar gastar neurônios caçando a posição
exata do campo. Os valores que significam números estão convertidos, e os zeros extras são
removidos.</p><p>Eu geralmente vou mostrar campos com tamanho variável separadamente. Por exemplo:</p><ul><li>O campo <code>name offset</code> aponta para uma <em>string</em> terminada em <code>NUL</code> (<code>"Ai que saco"</code>).</li></ul><p>Uma string terminada em <code>NUL</code> é uma string que termina em um byte <code>0</code>. É a string que o C usa.</p><hr><p>E é isso.</p><p>Se você sentiu que eu não expliquei algo direito, comente aí que eu altero a postagem explicando
melhor.</p><p>Amanhã a gente começa!</p></div></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//https-arthurmco-github-io-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><footer class=footer><div class=footer__dates><h4>Archive</h4><ul id=date-archive><li><a href=https://arthurmco.github.io/blog/archive/202208>August 2022</a> (5)</li><li><a href=https://arthurmco.github.io/blog/archive/202207>July 2022</a> (2)</li><li><a href=https://arthurmco.github.io/blog/archive/202205>May 2022</a> (1)</li><li><a href=https://arthurmco.github.io/blog/archive/202204>April 2022</a> (1)</li><li><a href=https://arthurmco.github.io/blog/archive/202203>March 2022</a> (2)</li></optgroup><li><a href=https://arthurmco.github.io/blog/archive/202109>September 2021</a> (2)</li><li><a href=https://arthurmco.github.io/blog/archive/202104>April 2021</a> (1)</li><li><a href=https://arthurmco.github.io/blog/archive/202102>February 2021</a> (3)</li></optgroup></li></div><div class=footer__inner><div class=copyright><span>© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a> :: forked by <a href=https://twitter.com/usrbinarthur>arthurmco</a></span></div></div></footer><script src=https://arthurmco.github.io/blog/assets/main.js></script>
<script src=https://arthurmco.github.io/blog/assets/prism.js></script></div></body></html>